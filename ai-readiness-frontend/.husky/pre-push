#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Run component validation on all files
echo "âš™ï¸ Validating all React component boundaries..."
VALIDATE_ALL_FILES=true node .claude/hooks/validate-components.js

if [ $? -ne 0 ]; then
  echo "âŒ Component validation failed. Push blocked."
  exit 1
fi

# Run comprehensive tests
echo "ğŸ§ª Running test suite..."
npm run test:ci

if [ $? -ne 0 ]; then
  echo "âŒ Tests failed. Push blocked."
  exit 1
fi

echo "âœ… All pre-push checks passed!"